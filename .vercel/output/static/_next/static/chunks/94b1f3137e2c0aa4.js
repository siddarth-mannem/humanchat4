(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12352,e=>{"use strict";let t="https://api.humanchat.com",s=async e=>{if(!e.ok)throw Error(await e.text().catch(()=>"")||"Request failed");return e.json()},a=(e={})=>({credentials:"include",headers:{"Content-Type":"application/json",...e.headers??{}},...e}),i=async()=>(await s(await fetch(`${t}/api/admin/overview`,a()))).metrics,r=async(e={})=>{let i=new URL("/api/admin/users",t);return e.q&&i.searchParams.set("q",e.q),e.role&&i.searchParams.set("role",e.role),"boolean"==typeof e.managed&&i.searchParams.set("managed",String(e.managed)),(await s(await fetch(i.toString(),a()))).users??[]},n=async(e,i)=>(await s(await fetch(`${t}/api/admin/users/${e}`,{...a({method:"PATCH"}),body:JSON.stringify(i)}))).user,d=async(e=60)=>{let i=new URL("/api/admin/sessions",t);return i.searchParams.set("limit",String(e)),(await s(await fetch(i.toString(),a()))).sessions??[]},l=async()=>(await s(await fetch(`${t}/api/admin/requests`,a()))).requests??[],c=async e=>{await s(await fetch(`${t}/api/admin/announcements`,{...a({method:"POST"}),body:JSON.stringify({message:e})}))},h=async()=>(await s(await fetch(`${t}/api/admin/announcements`,a()))).announcements??[];e.s(["fetchAdminAnnouncements",0,h,"fetchAdminOverview",0,i,"fetchAdminRequests",0,l,"fetchAdminSessions",0,d,"fetchAdminUsers",0,r,"publishAdminAnnouncement",0,c,"updateAdminUser",0,n])},43692,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(47167);let a="https://api.humanchat.com",i=async e=>{if(!e.ok)throw Error(await e.text().catch(()=>"")||"Request failed");return e.json()},r=async e=>{let t=new URL("/api/requested-people",a);return e&&t.searchParams.set("status",e),(await i(await fetch(t.toString(),{method:"GET",credentials:"include"}))).people??[]},n=async(e,t)=>(await i(await fetch(`${a}/api/requested-people/${e}/status`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})}))).person,d=["pending","contacted","declined","onboarded"],l=e=>{switch(e){case"pending":return"Pending";case"contacted":return"Contacted";case"declined":return"Declined";case"onboarded":return"Onboarded";default:return e}},c=e=>new Date(e).toLocaleString();function h(){let[e,a]=(0,s.useState)([]),[i,h]=(0,s.useState)(!0),[m,x]=(0,s.useState)(null),[o,u]=(0,s.useState)("pending"),p=async()=>{h(!0),x(null);try{let e=await r("all"===o?void 0:o);a(e)}catch(e){x(e instanceof Error?e.message:"Failed to load requests")}finally{h(!1)}};(0,s.useEffect)(()=>{p()},[o]);let w=(0,s.useMemo)(()=>e.reduce((e,t)=>e+(t.request_count??0),0),[e]),j=async(e,t)=>{try{let s=await n(e,t);a(e=>e.map(e=>e.normalized_name===s.normalized_name?s:e))}catch(e){x(e instanceof Error?e.message:"Unable to update status")}};return(0,t.jsxs)("div",{className:"mx-auto w-full max-w-5xl rounded-3xl border border-white/10 bg-white/5 p-6 text-white",children:[(0,t.jsxs)("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold",children:"Requested People"}),(0,t.jsx)("p",{className:"text-sm text-white/70",children:"Track who members ask for even if they are not on HumanChat yet."})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:["all",...d].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>u(e),className:`rounded-full border px-4 py-1 text-sm ${o===e?"border-white bg-white/20":"border-white/30 text-white/80"}`,children:"all"===e?"All":l(e)},e))})]}),i&&(0,t.jsx)("div",{className:"text-white/80",children:"Loading…"}),m&&(0,t.jsx)("div",{className:"mb-4 rounded-xl border border-red-400/40 bg-red-500/10 p-3 text-sm text-red-200",children:m}),!i&&0===e.length&&(0,t.jsx)("div",{className:"text-white/70",children:"No requests yet."}),!i&&e.length>0&&(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-white/10 text-left text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"text-white/60",children:[(0,t.jsx)("th",{className:"px-4 py-3",children:"Name"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Requests"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Status"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Last Requested"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Created"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-white/10",children:e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-4 py-3 font-medium",children:e.name}),(0,t.jsx)("td",{className:"px-4 py-3",children:e.request_count}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("select",{className:"rounded-xl border border-white/30 bg-transparent px-2 py-1 text-sm",value:e.status,onChange:t=>j(e.normalized_name,t.target.value),children:d.map(e=>(0,t.jsx)("option",{value:e,className:"text-black",children:l(e)},e))})}),(0,t.jsx)("td",{className:"px-4 py-3 text-white/80",children:c(e.last_requested_at)}),(0,t.jsx)("td",{className:"px-4 py-3 text-white/50",children:c(e.created_at)})]},e.normalized_name))})]})}),(0,t.jsxs)("div",{className:"mt-6 text-sm text-white/70",children:["Total individual requests captured in this view: ",(0,t.jsx)("strong",{className:"text-white",children:w})]})]})}var m=e.i(12352);function x(){let[e,a]=(0,s.useState)([]),[i,r]=(0,s.useState)(!0),[n,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=!0;return(async()=>{r(!0);try{let t=await (0,m.fetchAdminRequests)();e&&(a(t),d(null))}catch(t){e&&d(t instanceof Error?t.message:"Unable to load requests")}finally{e&&r(!1)}})(),()=>{e=!1}},[]),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-semibold text-white",children:"Requests & demand"}),(0,t.jsx)("p",{className:"text-white/60",children:"Track concierge requests and requested names."})]}),(0,t.jsxs)("div",{className:"rounded-3xl border border-white/10 bg-white/5",children:[(0,t.jsx)("div",{className:"border-b border-white/10 px-6 py-4 text-sm text-white/70",children:"Pending managed requests"}),i?(0,t.jsx)("div",{className:"p-6 text-white/70",children:"Loading requests…"}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-white/10 text-left text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"text-white/60",children:[(0,t.jsx)("th",{className:"px-6 py-3",children:"Member"}),(0,t.jsx)("th",{className:"px-6 py-3",children:"Target"}),(0,t.jsx)("th",{className:"px-6 py-3",children:"Message"}),(0,t.jsx)("th",{className:"px-6 py-3",children:"Preferred time"}),(0,t.jsx)("th",{className:"px-6 py-3",children:"Submitted"})]})}),(0,t.jsxs)("tbody",{className:"divide-y divide-white/10",children:[e.map(e=>(0,t.jsxs)("tr",{className:"text-white/90",children:[(0,t.jsxs)("td",{className:"px-6 py-3",children:[(0,t.jsx)("div",{className:"font-medium",children:e.requester_name}),(0,t.jsx)("div",{className:"text-xs text-white/60",children:e.requester_user_id})]}),(0,t.jsxs)("td",{className:"px-6 py-3",children:[(0,t.jsx)("div",{className:"font-medium",children:e.target_name}),(0,t.jsx)("div",{className:"text-xs text-white/60",children:e.target_user_id})]}),(0,t.jsx)("td",{className:"px-6 py-3 text-white/70",children:e.message}),(0,t.jsx)("td",{className:"px-6 py-3 text-white/60",children:e.preferred_time??"—"}),(0,t.jsx)("td",{className:"px-6 py-3 text-white/60",children:new Date(e.created_at).toLocaleString()})]},e.id)),!e.length&&!i&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"px-6 py-4 text-white/60",colSpan:5,children:"No pending requests."})})]})]})}),n&&(0,t.jsx)("div",{className:"border-t border-red-400/30 bg-red-500/10 px-6 py-3 text-sm text-red-100",children:n})]}),(0,t.jsx)(h,{})]})}e.s(["default",()=>x],43692)}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12352,e=>{"use strict";let t="https://api.humanchat.com",s=async e=>{if(!e.ok)throw Error(await e.text().catch(()=>"")||"Request failed");return e.json()},a=(e={})=>({credentials:"include",headers:{"Content-Type":"application/json",...e.headers??{}},...e}),i=async()=>(await s(await fetch(`${t}/api/admin/overview`,a()))).metrics,n=async(e={})=>{let i=new URL("/api/admin/users",t);return e.q&&i.searchParams.set("q",e.q),e.role&&i.searchParams.set("role",e.role),"boolean"==typeof e.managed&&i.searchParams.set("managed",String(e.managed)),(await s(await fetch(i.toString(),a()))).users??[]},r=async(e,i)=>(await s(await fetch(`${t}/api/admin/users/${e}`,{...a({method:"PATCH"}),body:JSON.stringify(i)}))).user,c=async(e=60)=>{let i=new URL("/api/admin/sessions",t);return i.searchParams.set("limit",String(e)),(await s(await fetch(i.toString(),a()))).sessions??[]},d=async()=>(await s(await fetch(`${t}/api/admin/requests`,a()))).requests??[],l=async e=>{await s(await fetch(`${t}/api/admin/announcements`,{...a({method:"POST"}),body:JSON.stringify({message:e})}))},h=async()=>(await s(await fetch(`${t}/api/admin/announcements`,a()))).announcements??[];e.s(["fetchAdminAnnouncements",0,h,"fetchAdminOverview",0,i,"fetchAdminRequests",0,d,"fetchAdminSessions",0,c,"fetchAdminUsers",0,n,"publishAdminAnnouncement",0,l,"updateAdminUser",0,r])},36086,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(12352);function i(){let[e,i]=(0,s.useState)([]),[n,r]=(0,s.useState)(50),[c,d]=(0,s.useState)(!0),[l,h]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=!0;return(async()=>{d(!0);try{let t=await (0,a.fetchAdminSessions)(n);e&&(i(t),h(null))}catch(t){e&&h(t instanceof Error?t.message:"Unable to load sessions")}finally{e&&d(!1)}})(),()=>{e=!1}},[n]),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-semibold text-white",children:"Sessions"}),(0,t.jsx)("p",{className:"text-white/60",children:"Monitor live and recent activity."})]}),(0,t.jsx)("select",{value:n,onChange:e=>r(Number(e.target.value)),className:"w-32 rounded-2xl border border-white/20 bg-white/5 px-3 py-2 text-sm text-white",children:[25,50,100,150].map(e=>(0,t.jsxs)("option",{value:e,className:"text-black",children:["Last ",e]},e))})]}),l&&(0,t.jsx)("div",{className:"rounded-2xl border border-red-400/30 bg-red-500/10 p-4 text-sm text-red-100",children:l}),(0,t.jsx)("div",{className:"rounded-3xl border border-white/10 bg-white/5",children:c?(0,t.jsx)("div",{className:"p-6 text-white/70",children:"Loading sessionsâ€¦"}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-white/10 text-left text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"text-white/60",children:[(0,t.jsx)("th",{className:"px-6 py-3",children:"Host"}),(0,t.jsx)("th",{className:"px-6 py-3",children:"Guest"}),(0,t.jsx)("th",{className:"px-6 py-3",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3",children:"Type"}),(0,t.jsx)("th",{className:"px-6 py-3",children:"Duration"}),(0,t.jsx)("th",{className:"px-6 py-3",children:"Agreed rate"}),(0,t.jsx)("th",{className:"px-6 py-3",children:"Updated"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-white/10",children:e.map(e=>(0,t.jsxs)("tr",{className:"text-white/90",children:[(0,t.jsx)("td",{className:"px-6 py-3",children:e.host_name}),(0,t.jsx)("td",{className:"px-6 py-3",children:e.guest_name}),(0,t.jsx)("td",{className:`px-6 py-3 text-xs font-semibold ${(e=>{switch(e){case"in_progress":return"text-peach";case"complete":return"text-aqua";default:return"text-white/70"}})(e.status)}`,children:e.status.replace("_"," ")}),(0,t.jsx)("td",{className:"px-6 py-3 text-white/70",children:e.type}),(0,t.jsxs)("td",{className:"px-6 py-3 text-white/70",children:[e.duration_minutes," min"]}),(0,t.jsxs)("td",{className:"px-6 py-3",children:["$",(e.agreed_price/100).toFixed(2)]}),(0,t.jsx)("td",{className:"px-6 py-3 text-white/60",children:new Date(e.updated_at).toLocaleString()})]},e.id))})]})})})]})}e.s(["default",()=>i])}]);
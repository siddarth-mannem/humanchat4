(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12352,e=>{"use strict";let t="https://api.humanchat.com",a=async e=>{if(!e.ok)throw Error(await e.text().catch(()=>"")||"Request failed");return e.json()},s=(e={})=>({credentials:"include",headers:{"Content-Type":"application/json",...e.headers??{}},...e}),n=async()=>(await a(await fetch(`${t}/api/admin/overview`,s()))).metrics,i=async(e={})=>{let n=new URL("/api/admin/users",t);return e.q&&n.searchParams.set("q",e.q),e.role&&n.searchParams.set("role",e.role),"boolean"==typeof e.managed&&n.searchParams.set("managed",String(e.managed)),(await a(await fetch(n.toString(),s()))).users??[]},r=async(e,n)=>(await a(await fetch(`${t}/api/admin/users/${e}`,{...s({method:"PATCH"}),body:JSON.stringify(n)}))).user,c=async(e=60)=>{let n=new URL("/api/admin/sessions",t);return n.searchParams.set("limit",String(e)),(await a(await fetch(n.toString(),s()))).sessions??[]},d=async()=>(await a(await fetch(`${t}/api/admin/requests`,s()))).requests??[],l=async e=>{await a(await fetch(`${t}/api/admin/announcements`,{...s({method:"POST"}),body:JSON.stringify({message:e})}))},o=async()=>(await a(await fetch(`${t}/api/admin/announcements`,s()))).announcements??[];e.s(["fetchAdminAnnouncements",0,o,"fetchAdminOverview",0,n,"fetchAdminRequests",0,d,"fetchAdminSessions",0,c,"fetchAdminUsers",0,i,"publishAdminAnnouncement",0,l,"updateAdminUser",0,r])},96313,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(12352);function n(){let[e,n]=(0,a.useState)([]),[i,r]=(0,a.useState)(""),[c,d]=(0,a.useState)(!0),[l,o]=(0,a.useState)(null),[h,m]=(0,a.useState)(!1),u=async()=>{d(!0);try{let e=await (0,s.fetchAdminAnnouncements)();n(e),o(null)}catch(e){o(e instanceof Error?e.message:"Unable to load announcements")}finally{d(!1)}};(0,a.useEffect)(()=>{u()},[]);let w=async e=>{if(e.preventDefault(),i.trim())try{m(!0),await (0,s.publishAdminAnnouncement)(i.trim()),r(""),await u()}catch(e){o(e instanceof Error?e.message:"Unable to publish")}finally{m(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-semibold text-white",children:"Announcements"}),(0,t.jsx)("p",{className:"text-white/60",children:"Share ops updates with the broader team."})]}),(0,t.jsxs)("form",{onSubmit:w,className:"rounded-3xl border border-white/10 bg-white/5 p-6 space-y-4",children:[(0,t.jsx)("textarea",{value:i,onChange:e=>r(e.target.value),placeholder:"Shipping new managed booking wizard…",className:"w-full rounded-2xl border border-white/20 bg-transparent px-4 py-3 text-white placeholder:text-white/40 focus:border-white",rows:4}),(0,t.jsx)("button",{type:"submit",disabled:h||!i.trim(),className:"rounded-full bg-white px-6 py-2 text-sm font-semibold text-midnight disabled:cursor-not-allowed disabled:bg-white/40",children:h?"Publishing…":"Publish"})]}),l&&(0,t.jsx)("div",{className:"rounded-2xl border border-red-400/30 bg-red-500/10 p-4 text-sm text-red-100",children:l}),(0,t.jsxs)("div",{className:"space-y-4",children:[c&&(0,t.jsx)("div",{className:"text-white/70",children:"Loading announcements…"}),!c&&0===e.length&&(0,t.jsx)("div",{className:"text-white/60",children:"No announcements yet."}),e.map(e=>(0,t.jsxs)("div",{className:"rounded-3xl border border-white/10 bg-white/5 p-5",children:[(0,t.jsx)("p",{className:"text-sm text-white/50",children:new Date(e.createdAt).toLocaleString()}),(0,t.jsx)("p",{className:"mt-2 text-white",children:e.message})]},e.id))]})]})}e.s(["default",()=>n])}]);
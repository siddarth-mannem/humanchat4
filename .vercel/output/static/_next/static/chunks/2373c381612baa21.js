(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},95853,e=>{"use strict";var t=e.i(43476),s=e.i(23612),a=e.i(69237),i=e.i(7670);let r="Human",n=e=>{let t=e?.trim();return t&&t.length>0?t:r},l={free:{label:"Free",helper:"No charge · tips optional"},paid:{label:"Paid",helper:"Charge per minute for instant connects"},charity:{label:"Charity",helper:"Proceeds donated to your selected org"}},o={online:"bg-emerald-400/20 text-emerald-200 border-emerald-400/40",busy:"bg-amber-400/20 text-amber-100 border-amber-400/40",offline:"bg-white/5 text-white/60 border-white/15"};function d({profileState:e}){var s;let{profile:a,loading:d,error:c,refresh:x}=e,h=a?n(a.headline):r,m=a?n(a.bio):r;return(0,t.jsxs)("section",{className:"flex flex-col gap-6 rounded-3xl border border-white/10 bg-white/5 p-6 text-white shadow-2xl",children:[(0,t.jsxs)("header",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-white/50",children:"Public profile"}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"How members see you"}),(()=>{if(!a)return null;let e=a.hasActiveSession?"busy":a.isOnline?"online":"offline",s=a.hasActiveSession?"In a call":a.isOnline?"Online now":"Offline";return(0,t.jsxs)("span",{className:(0,i.default)("inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em]",o[e]),children:[(0,t.jsx)("span",{className:(0,i.default)("h-2 w-2 rounded-full","online"===e?"bg-emerald-300":"busy"===e?"bg-amber-300":"bg-white/50")}),s]})})()]}),(0,t.jsx)("p",{className:"text-sm text-white/70",children:"These details power Sam recommendations and every ProfileCard."})]}),d&&(0,t.jsx)("p",{className:"text-sm text-white/70",children:"Loading profile…"}),!d&&c&&(0,t.jsxs)("div",{className:"rounded-2xl border border-rose-500/30 bg-rose-500/10 p-4 text-sm text-rose-100",children:[(0,t.jsx)("p",{children:c}),(0,t.jsx)("button",{type:"button",onClick:()=>x(),className:"mt-3 rounded-full border border-rose-200/40 px-3 py-1 text-xs font-semibold text-rose-50",children:"Try again"})]}),!d&&!c&&!a&&(0,t.jsx)("p",{className:"text-sm text-white/70",children:"Sign in to view your profile."}),!d&&a&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-4",children:[(0,t.jsx)("p",{className:"text-sm text-white/60",children:"Your identity"}),(0,t.jsxs)("div",{className:"mt-2 flex flex-col gap-1",children:[(0,t.jsx)("p",{className:"text-xl font-semibold text-white",children:a.name}),(0,t.jsx)("p",{className:"text-sm text-white/60",children:a.email})]}),(0,t.jsx)("p",{className:"mt-4 text-base text-white/80",children:h}),(0,t.jsx)("p",{className:"mt-2 text-sm leading-relaxed text-white/70",children:m})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-4",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-white",children:"Conversation type"}),(0,t.jsx)("p",{className:"text-xs text-white/60",children:"Determines the badge Sam shows before your name."}),(0,t.jsxs)("div",{className:"mt-3 rounded-2xl border border-white/15 bg-white/5 p-4",children:[(0,t.jsx)("p",{className:"text-lg font-semibold text-white",children:l[a.conversationType]?.label??a.conversationType}),(0,t.jsx)("p",{className:"text-sm text-white/60",children:l[a.conversationType]?.helper??"Custom configuration"})]}),a.charityName&&"charity"===a.conversationType&&(0,t.jsxs)("p",{className:"mt-3 rounded-xl border border-emerald-400/40 bg-emerald-400/10 px-3 py-2 text-sm text-emerald-100",children:["Donations go to ",a.charityName]})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-4",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-white",children:"Instant availability"}),(0,t.jsx)("p",{className:"text-xs text-white/60",children:"Shown on the Connect button Sam renders."}),(0,t.jsx)("p",{className:"mt-3 text-lg font-semibold text-white",children:(s=a.instantRatePerMinute)&&!(s<=0)?`$${s.toFixed(2*(s%1!=0))}/min`:"Not set"}),(0,t.jsxs)("p",{className:"text-sm text-white/60",children:["Confidential rate: ",a.confidentialRate?"Yes":"No"]}),(0,t.jsxs)("p",{className:"text-sm text-white/60",children:["Display mode: ",a.displayMode??"normal"]})]})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-white",children:"Scheduled rates"}),(0,t.jsx)("p",{className:"text-xs text-white/60",children:"Members see these as bookable blocks."})]})}),(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[0===a.scheduledRates.length&&(0,t.jsx)("p",{className:"text-sm text-white/60",children:"No scheduled durations configured."}),a.scheduledRates.length>0&&(0,t.jsx)("ul",{className:"divide-y divide-white/5 rounded-2xl border border-white/10",children:a.scheduledRates.map(e=>(0,t.jsxs)("li",{className:"flex items-center justify-between px-4 py-3 text-sm",children:[(0,t.jsxs)("span",{className:"text-white/80",children:[e.durationMinutes," min"]}),(0,t.jsxs)("span",{className:"font-semibold text-white",children:["$",e.price.toLocaleString()]})]},`${e.durationMinutes}-${e.price}`))})]})]})]})]})}var c=e.i(71645);let x=[{value:"available",label:"Available now",helper:"Shows the green dot and boosts you in search."},{value:"busy",label:"In a session",helper:"Lets members know you are wrapping up shortly."},{value:"offline",label:"Offline",helper:"Removes you from instant connects until you come back."}],h={free:"Perfect for open office hours or mentoring loops.",paid:"Charge per minute for instant connects.",charity:"Route proceeds to a charity partner."};function m({profileState:e}){let{profile:s,save:a,saving:i}=e,[r,n]=(0,c.useState)("offline"),[l,o]=(0,c.useState)("free"),[d,m]=(0,c.useState)(""),[u,p]=(0,c.useState)(!0),[b,f]=(0,c.useState)(null),[y,w]=(0,c.useState)(null);(0,c.useEffect)(()=>{s&&(s.hasActiveSession?n("busy"):s.isOnline?n("available"):n("offline"),o(s.conversationType),m(s.instantRatePerMinute?String(s.instantRatePerMinute):""),p("by_request"!==s.displayMode))},[s]);let j=(0,c.useMemo)(()=>{switch(r){case"busy":return"Members will see you as in-session but still online.";case"offline":return"You will disappear from instant search until you toggle back on.";default:return"Sam will route members to you instantly."}},[r]),g=i||!s,N=async e=>{if(e.preventDefault(),s){f(null),w(null);try{let e,t="paid"===l?(e=Number(d),!Number.isFinite(e)||e<=0?null:Math.round(100*e)/100):null;await a({conversationType:l,instantRatePerMinute:"paid"===l?t:null,isOnline:"offline"!==r,hasActiveSession:"busy"===r,displayMode:u?"normal":"by_request"}),w("success"),f("Preferences saved successfully.")}catch(e){w("error"),f(e instanceof Error?e.message:"Unable to save preferences.")}}};return(0,t.jsxs)("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-6 text-white shadow-2xl",children:[(0,t.jsxs)("header",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-white/50",children:"Account preferences"}),(0,t.jsx)("h2",{className:"text-2xl font-semibold",children:"Control what members see"}),(0,t.jsx)("p",{className:"text-sm text-white/70",children:"Availability, pricing, and chat request options are live as soon as you save."})]}),!s&&(0,t.jsx)("p",{className:"mt-6 rounded-2xl border border-white/10 bg-black/30 p-4 text-sm text-white/70",children:"Sign in to edit your account preferences."}),s&&(0,t.jsxs)("form",{className:"mt-6 space-y-6",onSubmit:N,children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold",children:"Availability"}),(0,t.jsx)("p",{className:"text-xs text-white/60",children:"Choose how Sam represents you right now."})]}),(0,t.jsx)("span",{className:"text-xs uppercase tracking-[0.3em] text-white/50",children:r})]}),(0,t.jsx)("div",{className:"mt-4 grid gap-3 sm:grid-cols-3",children:x.map(e=>(0,t.jsxs)("button",{type:"button",className:`rounded-2xl border bg-black/30 p-4 text-left text-sm transition ${r===e.value?"border-aqua/50 bg-aqua/10 text-white":"border-white/10 text-white/70 hover:border-white/30"}`,onClick:()=>n(e.value),children:[(0,t.jsx)("p",{className:"font-semibold",children:e.label}),(0,t.jsx)("p",{className:"mt-2 text-xs text-white/60",children:e.helper})]},e.value))}),(0,t.jsx)("p",{className:"mt-3 text-xs text-white/50",children:j})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-4",children:[(0,t.jsx)("p",{className:"text-sm font-semibold",children:"Conversation type"}),(0,t.jsx)("p",{className:"text-xs text-white/60",children:"Choose whether your instant connects are free, paid, or charity-focused."}),(0,t.jsx)("div",{className:"mt-4 flex flex-wrap gap-3",children:["free","paid","charity"].map(e=>(0,t.jsxs)("label",{className:`flex cursor-pointer flex-col gap-2 rounded-2xl border px-4 py-3 text-sm ${l===e?"border-aqua/60 bg-aqua/10 text-white":"border-white/15 text-white/70"}`,children:[(0,t.jsx)("input",{type:"radio",name:"conversationType",value:e,className:"hidden",checked:l===e,onChange:()=>o(e)}),(0,t.jsx)("span",{className:"font-semibold capitalize",children:e}),(0,t.jsx)("span",{className:"text-xs text-white/60",children:h[e]})]},e))}),"paid"===l&&(0,t.jsxs)("label",{className:"mt-4 block text-sm",children:[(0,t.jsx)("span",{className:"text-white/80",children:"Instant rate (USD/min)"}),(0,t.jsx)("input",{type:"number",min:"0",step:"0.5",value:d,onChange:e=>m(e.target.value),placeholder:"3.00",className:"mt-2 w-full rounded-2xl border border-white/15 bg-black/60 px-4 py-3 text-white focus:border-aqua/60"})]})]}),(0,t.jsx)("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold",children:"Open to chat requests"}),(0,t.jsx)("p",{className:"text-xs text-white/60",children:"Turn this off to require members to request access before Sam connects them."})]}),(0,t.jsx)("button",{type:"button",onClick:()=>p(e=>!e),className:`rounded-full border px-5 py-2 text-xs font-semibold uppercase tracking-[0.3em] ${u?"border-aqua/60 text-aqua":"border-white/20 text-white/50"}`,children:u?"on":"off"})]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"text-xs text-white/60",children:[(0,t.jsx)("p",{children:"Updates take effect immediately across chat and discovery."}),b&&(0,t.jsx)("p",{className:`mt-1 font-semibold ${"success"===y?"text-emerald-300":"error"===y?"text-rose-300":"text-white/70"}`,children:b})]}),(0,t.jsx)("button",{type:"submit",disabled:g,className:"inline-flex items-center justify-center rounded-full bg-gradient-to-r from-indigoGlow to-aqua px-6 py-3 text-sm font-semibold text-midnight disabled:opacity-50",children:i?"Saving…":"Save preferences"})]})]})]})}var u=e.i(16437);e.i(47167);let p="https://api.humanchat.com",b=async e=>{if(!e.ok)throw Error(await e.text().catch(()=>"")||"Request failed");return e.json()},f=(e={})=>({credentials:"include",headers:{"Content-Type":"application/json",...e.headers??{}},...e}),y=(e,t)=>{if(e&&"object"==typeof e){if(t){if(void 0!==e[t])return e[t];if(e.data&&void 0!==e.data[t])return e.data[t]}if(void 0!==e.data)return e.data}return e},w=e=>{var t;return{id:e.id,name:e.name,email:e.email,avatarUrl:e.avatar_url,headline:e.headline,bio:e.bio,conversationType:e.conversation_type,instantRatePerMinute:e.instant_rate_per_minute,scheduledRates:(t=e.scheduled_rates)?Object.entries(t).map(([e,t])=>({durationMinutes:Number(e),price:t})).filter(e=>Number.isFinite(e.durationMinutes)&&Number.isFinite(e.price)).sort((e,t)=>e.durationMinutes-t.durationMinutes):[],donationPreference:e.donation_preference??null,charityId:e.charity_id,charityName:e.charity_name,isOnline:e.is_online,hasActiveSession:e.has_active_session,managed:e.managed,managerId:e.manager_id,managerDisplayName:e.manager_display_name??null,displayMode:e.display_mode??null,confidentialRate:e.confidential_rate,updatedAt:e.updated_at}},j=async e=>w(y(await b(await fetch(`${p}/api/users/${e}`,f())),"user")),g=async(e,t)=>{let s={};return"headline"in t&&(s.headline=t.headline??null),"bio"in t&&(s.bio=t.bio??null),"conversationType"in t&&t.conversationType&&(s.conversation_type=t.conversationType),"instantRatePerMinute"in t&&(s.instant_rate_per_minute=t.instantRatePerMinute??null),"scheduledRates"in t&&(s.scheduled_rates=(e=>{if(!e)return;let t={};for(let s of e)Number.isFinite(s.durationMinutes)&&Number.isFinite(s.price)&&(s.durationMinutes<=0||s.price<=0||(t[String(Math.round(s.durationMinutes))]=Math.round(100*s.price)/100));return Object.keys(t).length>0?t:void 0})(t.scheduledRates??null)),"isOnline"in t&&(s.is_online=!!t.isOnline),"hasActiveSession"in t&&(s.has_active_session=!!t.hasActiveSession),"displayMode"in t&&(s.display_mode=t.displayMode??null),w(y(await b(await fetch(`${p}/api/users/${e}`,{...f({method:"PATCH"}),body:JSON.stringify(s)})),"user"))};function N(){let e=(()=>{let[e,t]=(0,c.useState)(null),[s,a]=(0,c.useState)(null),[i,r]=(0,c.useState)(!0),[n,l]=(0,c.useState)(null),[o,d]=(0,c.useState)(!1),x=(0,c.useCallback)(async()=>{r(!0);try{let e=await (0,u.fetchCurrentUser)();if(!e){t(null),a(null),l("Please sign in to manage your profile.");return}t(e);let s=await j(e.id);a(s),l(null)}catch(e){l(e instanceof Error?e.message:"Unable to load profile.")}finally{r(!1)}},[]);(0,c.useEffect)(()=>{x()},[x]);let h=(0,c.useCallback)(async()=>{await x()},[x]),m=(0,c.useCallback)(async t=>{if(!e)throw Error("Sign in required before saving changes.");d(!0);try{let s=await g(e.id,t);return a(s),l(null),s}catch(e){throw l(e instanceof Error?e.message:"Unable to save profile changes."),e}finally{d(!1)}},[e]);return{user:e,profile:s,loading:i,error:n,saving:o,refresh:h,save:m}})();return(0,t.jsxs)("main",{className:"min-h-screen bg-midnight text-white",children:[(0,t.jsxs)("header",{className:"flex items-center justify-between border-b border-white/10 px-6 py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.35em] text-white/50",children:"Account"}),(0,t.jsx)("h1",{className:"text-2xl font-semibold text-white",children:"Account & Preferences"})]}),(0,t.jsx)(s.default,{})]}),(0,t.jsx)("div",{className:"mx-auto w-full max-w-3xl px-4 py-8",children:(0,t.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,t.jsx)(a.default,{}),(0,t.jsx)(m,{profileState:e}),(0,t.jsx)(d,{profileState:e})]})})]})}e.s(["default",()=>N],95853)}]);